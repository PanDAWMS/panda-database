# PanDA Database Schema Patch 0.0.30

**Version:** 0.0.30  
**Upgrade from:** 0.0.29  
**Date:** November 2025

## Overview

This patch includes updates to worker node metrics tracking, JEDI task error logging, and CPU benchmarking capabilities.

**⚠️ IMPORTANT VERSION FORMAT CHANGE:**  
Starting with version 0.0.30, the `pandadb_version` table format has changed from two components (JEDI, SERVER) to a single unified component (PanDA). This is an **intentional breaking change** to reflect that PanDA Server and JEDI are always upgraded together and must be at the same schema version.

**Before (0.0.29 and earlier):**
```sql
 component | major | minor | patch
-----------+-------+-------+-------
 JEDI      |     0 |     0 |    29
 SERVER    |     0 |     0 |    29
(2 rows)
```

**After (0.0.30 and later):**
```sql
 component | major | minor | patch
-----------+-------+-------+-------
 PanDA     |     0 |     0 |    30
(1 row)
```

This change aligns with the SchemaChecker scripts in PanDA Server and JEDI that expect a single 'PanDA' component. 

## Files in this Patch

1. **0.0.30.patch.sql** - Main database updates (run against `panda_db` database)
2. **0.0.30.cron.patch.sql** - Cron job updates (run against database where `pg_cron` extension is installed)
3. **0.0.30.README.md** - This documentation file